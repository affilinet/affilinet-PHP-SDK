

{% highlight php linenos %}
<?php
// create a  Shop Search Request Object
$shopSearch = new \Affilinet\ProductData\Requests\ShopsRequest($affilinet);

$shopSearch
    ->addAllShopLogos()     // to include all logo sizes
    ->onlyShopsMatchingKeyword('Zalando') // only shops which match this keyword
    ->onlyShopsUpdatedAfter(new \DateTime('last month')); // only shops that have updated their products after this date


// send the query and get the response
$response = $shopSearch->send();

echo 'Total results : ' . $response->totalRecords();

// display some information about the found shops
foreach ($response->getShops() as $shop) {
    echo $shop->getName();
    echo $shop->getId();
    echo $shop->getProductCount();
    echo $shop->getLastUpdate()->format('dmY h:i:s');
    echo $shop->getUrl();
}

{% endhighlight %}

<div role="alert" class="alert alert-info">
    <strong>Getting no results?</strong> <br>
     Make sure you have an active partnership with at least one shop.
</div>

<p>
To see a list of all shops create an empty shopSearch like this:
{% highlight php linenos %}
<?php
$shopSearch = new \Affilinet\ProductData\Requests\ShopsRequest($affilinet);
$allShops = $shopSearch->send();
echo 'You have ' . $response->totalRecords() . ' shops with an active partnership';
{% endhighlight %}

