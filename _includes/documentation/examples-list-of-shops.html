

{% highlight php linenos %}
<?php
// create a  ShopsRequest Object
$shopsRequest = new \Affilinet\ProductData\Requests\ShopsRequest($affilinet);

$shopsRequest
    ->addShopLogoWithSize50px()     // to include a shop logo with 50px width
    ->onlyShopsMatchingKeyword('Zalando') // only shops which match this keyword
    ->onlyShopsUpdatedAfter(new \DateTime('last month')); // only shops that have updated their products after this date


// send the query and get the response
$response = $shopsRequest->send();

echo 'Total results : ' . $response->totalRecords();

// display some information about the found shops
foreach ($response->getShops() as $shop) {
    echo $shop->getName();
    echo $shop->getId();
    echo $shop->getProductCount();
    echo $shop->getLastUpdate()->format('dmY h:i:s');
    echo $shop->getUrl();
}

{% endhighlight %}

<div role="alert" class="alert alert-info">
    <strong>Getting no results?</strong> <br>
     Make sure you have an active partnership with at least one shop.
</div>

<p>
To see a list of all shops create an empty ShopsRequest like this:
{% highlight php linenos %}
<?php
$shopsRequest = new \Affilinet\ProductData\Requests\ShopsRequest($affilinet);
$allShops = $shopsRequest->send();
echo 'You have ' . $response->totalRecords() . ' shops with an active partnership';
{% endhighlight %}

